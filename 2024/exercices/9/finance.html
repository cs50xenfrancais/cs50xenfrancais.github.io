<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>CS50x en Fran√ßais</title>

    <!-- http://getbootstrap.com/docs/4.5/getting-started/introduction/ -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- https://momentjs.com/, https://momentjs.com/timezone/ -->
    <script src="/static/js/moment.min.js"></script>
    <script src="/static/js/moment-timezone-with-data.min.js"></script>
    <script src="/static/js/luxon.min.js"></script>

    <!-- https://www.algolia.com/doc/guides/building-search-ui/installation/js/ -->
    <script src="/static/js/algoliasearchLite.min.js"></script>
    <script src="/static/js/instantsearch.production.min.js"></script>
    <script src="/static/js/jekyll-theme-cs50.js"></script>

    <script id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="/static/highlight/highlight.min.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.8.0/dist/mermaid.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/static/highlight/styles/vs.min.css"/>
    <link rel="stylesheet" href="/static/css/page.css">

    <style>
      code {
        color: black;
        border: 1px solid #dee2e6;
      }

      pre > code {
        padding: 0 !important;
      }

      pre {
        border: 1px solid #dee2e6;
      }

      .mermaid {
        background-color: white !important;
        border: none !important;
      }
    </style>
  </head>

  <body>
    <!-- Markdown Flux Diagrams -->
    <script type="module">
      mermaid.initialize({startOnLoad: true});
    </script>
    <div class="container-fluid">
      <div class="row">
        <aside class="col-md" style="background-color: darkblue">
  <header>
    <h1>
      <a href="">CS50x en Fran√ßais</a>
    </h1>

    <p>
      <a target="_blank" href=""></a>
      <br/>
      2024
    </p>
  </header>

  <button class="btn btn-sm collapsed d-md-none" aria-controls="nav" aria-expanded="false" data-target="aside &gt; nav" data-toggle="collapse">
    Menu
  </button>

  <nav class="collapse d-md-block" id="nav">
    <hr/>

    <ul>
      <li>
        <a href="/2024/semaines/0.html">Semaine
          0</a>
        Scratch üò∫
      </li>
      <li>
        <a href="/2024/semaines/1.html">Semaine
          1</a>
        C
      </li>
      <li>
        <a href="/2024/semaines/2.html">Semaine
          2</a>
        Tableaux
      </li>
      <li>
        <a href="/2024/semaines/3.html">Semaine
          3</a>
        Algorithmes
      </li>
      <li>
        <a href="/2024/semaines/4.html">Semaine
          4</a>
        M√©moire
      </li>
      <li>
        <a href="/2024/semaines/5.html">Semaine
          5</a>
        Structures de Donn√©es
      </li>
      <li>
        <a href="/2024/semaines/6.html">Semaine
          6</a>
        Python
      </li>
      <li>
        <a href="/2024/semaines/7.html">Semaine
          7</a>
        SQL
      </li>
      <li>
        <a href="/2024/semaines/8.html">Semaine
          8</a>
        HTML, CSS, JavaScript
      </li>
      <li>
        <a href="/2024/semaines/9.html">Semaine
          9</a>
        Flask
      </li>
      <li>
        <a href="/2024/semaines/10.html">Semaine
          10</a>
        Cybers√©curit√©
      </li>
    </ul>

    <hr/>

    <ul>
      <li>
        <a href="/2024/projet.html">Projet Final</a>
      </li>
    </ul>

    <hr/>

    <ul>
      <li>
        <a href="/2024/honn%C3%AAtet%C3%A9.html">Honn√™tet√© Acad√©mique</a>
      </li>
      <li>
        <a href="/2024/certificat.html">Certificat CS50</a>
      </li>
      <li>
        <a href="/2024/questions-frequemment-posees.html">Questions Fr√©quemment Pos√©es</a>
      </li>
      <li>
        <a href="https://cs50.me/cs50x">Carnet de Notes</a>
      </li>
      <li>
        <a href="/2024/equipe.html">√âquipe</a>
      </li>
      <li>
        <a href="/2024/plan-de-cours.html">Plan de Cours</a>
      </li>
    </ul>
    <hr/>

    <ul>
      <li>
        <a href="/manual/index.html">Pages du Manuel</a>
      </li>
      <li>
        <a href="/2024/style.html">Guide de Style</a>
      </li>
    </ul>
  </nav>
</aside>
        <main class="col-md markdown-body">
          

  <h1>Finance C$50</h1>
<p>Implementa un sitio web a trav√©s del cual los usuarios pueden "comprar" y "vender" acciones, √† la siguiente imagen.</p>
<p><img alt="Finance C$50" src="https://cs50.harvard.edu/x/2024/psets/9/finance/finance_2024.png" /></p>
<h2>Trasfondo</h2>
<p>Si no est√°s seguro de lo que significa comprar y vender acciones (por ejemplo, acciones de una empresa), consulta <a href="https://www.investopedia.com/articles/basics/06/invest1000.asp">aqu√≠</a> para obtener un tutorial.</p>
<p>Est√°s a punto de implementar Finance C$50, una aplicaci√≥n web a trav√©s de la cual puedes administrar carteras de acciones. Esta herramienta no solo te permitir√° verificar los precios reales de las acciones y los valores de las carteras, sino que tambi√©n te permitir√° comprar (bueno, "comprar") y vender (bueno, "vender") acciones consultando los precios de las acciones.</p>
<p>De hecho, existen herramientas (una se conoce como IEX) que te permiten descargar cotizaciones de acciones a trav√©s de su API (interfaz de programaci√≥n de aplicaciones) utilizando URL como <code>https://api.iex.cloud/v1/data/core/quote/nflx?token=API_KEY</code>. Observa c√≥mo el s√≠mbolo de Netflix (NFLX) est√° incrustado en esta URL; as√≠ es como IEX sabe de qui√©n devolver los datos. Ese enlace en realidad no devolver√° ning√∫n dato porque IEX requiere que uses una clave API, pero si lo hiciera, ver√≠as una respuesta en formato JSON (JavaScript Object Notation) como esta:</p>
<pre><code>  {
    "avgTotalVolume":6787785,
    "calculationPrice":"tops",
    "change":1.46,
    "changePercent":0.00336,
    "close":null,
    "closeSource":"official",
    "closeTime":null,
    "companyName":"Netflix Inc.",
    "currency":"USD",
    "delayedPrice":null,
    "delayedPriceTime":null,
    "extendedChange":null,
    "extendedChangePercent":null,
    "extendedPrice":null,
    "extendedPriceTime":null,
    "high":null,
    "highSource":"IEX real time price",
    "highTime":1699626600947,
    "iexAskPrice":460.87,
    "iexAskSize":123,
    "iexBidPrice":435,
    "iexBidSize":100,
    "iexClose":436.61,
    "iexCloseTime":1699626704609,
    "iexLastUpdated":1699626704609,
    "iexMarketPercent":0.00864679844447232,
    "iexOpen":437.37,
    "iexOpenTime":1699626600859,
    "iexRealtimePrice":436.61,
    "iexRealtimeSize":5,
    "iexVolume":965,
    "lastTradeTime":1699626704609,
    "latestPrice":436.61,
    "latestSource":"IEX real time price",
    "latestTime":"9:31:44 AM",
    "latestUpdate":1699626704609,
    "latestVolume":null,
    "low":null,
    "lowSource":"IEX real time price",
    "lowTime":1699626634509,
    "marketCap":192892118443,
    "oddLotDelayedPrice":null,
    "oddLotDelayedPriceTime":null,
    "open":null,
    "openTime":null,
    "openSource":"official",
    "peRatio":43.57,
    "previousClose":435.15,
    "previousVolume":2735507,
    "primaryExchange":"NASDAQ",
    "symbol":"NFLX",
    "volume":null,
    "week52High":485,
    "week52Low":271.56,
    "ytdChange":0.4790450244167119,
    "isUSMarketOpen":true
  }
</code></pre>
<p>Observa c√≥mo, entre las llaves, hay una lista separada por comas de pares clave-valor, con un dos puntos que separa cada clave de su valor. Haremos algo muy similar con Yahoo Finance.</p>
<p>¬°Pasemos nuestra atenci√≥n ahora a obtener el c√≥digo de distribuci√≥n de este problema!</p>
<h2>Primeros pasos</h2>
<p>Inicia sesi√≥n en <a href="https://cs50.dev/">cs50.dev</a>, haz clic en tu ventana de terminal y ejecuta <code>cd</code> por s√≠ mismo. Deber√≠as encontrar que el mensaje de la ventana de tu terminal se asemeja al siguiente:</p>
<pre><code>  $
</code></pre>
<p>Luego ejecuta</p>
<pre><code>  wget https://cdn.cs50.net/2024/x/psets/9/finance.zip
</code></pre>
<p>para descargar un ZIP llamado <code>finance.zip</code> en tu espacio de c√≥digo.</p>
<p>Luego ejecuta</p>
<pre><code>  unzip finance.zip
</code></pre>
<p>para crear una carpeta llamada <code>finance</code>. Ya no necesitas el archivo ZIP, por lo que puedes ejecutar</p>
<pre><code>  rm finance.zip
</code></pre>
<p>y responde con "y" seguido de Enter en el mensaje para eliminar el archivo ZIP que descargaste.</p>
<p>Ahora escribe</p>
<pre><code>  cd finance
</code></pre>
<p>seguido de Enter para moverte a ese directorio (es decir, abrirlo). Tu mensaje ahora deber√≠a parecerse al siguiente.</p>
<pre><code>  finance/ $
</code></pre>
<p>Ejecuta <code>ls</code> por s√≠ solo y deber√≠as ver algunos archivos y carpetas:</p>
<pre><code>  app.py  finance.db  helpers.py  requirements.txt  static/  templates/
</code></pre>
<p>Si te encuentras con alg√∫n problema, ¬°sigue estos mismos pasos nuevamente y ve si puedes determinar d√≥nde te equivocaste!</p>
<h3>Ejecuci√≥n</h3>
<p>Inicia el servidor web integrado de Flask (dentro de <code>finance/</code>):</p>
<pre><code>  $ flask run
</code></pre>
<p>Visita la URL generada por <code>flask</code> para ver el c√≥digo de distribuci√≥n en acci√≥n. ¬°Sin embargo, no podr√°s iniciar sesi√≥n ni registrarte todav√≠a!</p>
<p>Dentro de <code>finance/</code>, ejecuta <code>sqlite3 finance.db</code> para abrir <code>finance.db</code> con <code>sqlite3</code>. Si ejecutas <code>.schema</code> en el mensaje de SQLite, observa c√≥mo <code>finance.db</code> viene con una tabla llamada <code>users</code>. Echa un vistazo a su estructura (es decir, esquema). Observa c√≥mo, de forma predeterminada, los nuevos usuarios recibir√°n $10,000 en efectivo. Pero si ejecutas <code>SELECT * FROM users;</code>, a√∫n no hay usuarios (es decir, filas) para navegar.</p>
<p>Otra forma de ver <code>finance.db</code> es con un programa llamado phpLiteAdmin. Haz clic en <code>finance.db</code> en el explorador de archivos de tu espacio de c√≥digos, luego haz clic en el enlace que se muestra debajo del texto "Visita el siguiente enlace para autorizar la vista previa de GitHub". Deber√≠as ver informaci√≥n sobre la base de datos en s√≠, as√≠ como una tabla, <code>users</code>, tal como la viste en el mensaje <code>sqlite3</code> con <code>.schema</code>.</p>
<h3>Comprendre</h3>
<h4><code>app.py</code></h4>
<p>Ouvrez <code>app.py</code>. En haut du fichier se trouvent plusieurs imports, parmi lesquels le module SQL de CS50 et quelques fonctions d'aide. Plus d'informations √† leur sujet bient√¥t.</p>
<p>Apr√®s avoir configur√© <a href="https://flask.palletsprojects.com/">Flask</a>, remarquez comment ce fichier d√©sactive la mise en cache des r√©ponses (√† condition que vous soyez en mode d√©bogage, ce qui est le cas par d√©faut dans votre espace de code code50), de peur que vous ne modifiiez un fichier sans que votre navigateur ne s'en aper√ßoive. Remarquez ensuite comment il configure <a href="https://jinja.palletsprojects.com/en/3.1.x/">Jinja</a> avec un ¬´ filtre ¬ª personnalis√©, <code>usd</code>, une fonction (d√©finie dans <code>helpers.py</code>) qui facilitera le formatage des valeurs en dollars am√©ricains (USD). Il configure ensuite Flask pour stocker les <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#sessions">sessions</a> sur le syst√®me de fichiers local (c'est-√†-dire le disque) au lieu de les stocker dans des cookies (sign√©s num√©riquement), ce qui est la valeur par d√©faut de Flask. Le fichier configure ensuite le module SQL de CS50 pour utiliser <code>finance.db</code>.</p>
<p>Par la suite, il y a tout un tas d'itin√©raires, dont seulement deux sont enti√®rement impl√©ment√©s : <code>login</code> et <code>logout</code>. Lisez d'abord la mise en ≈ìuvre de <code>login</code>. Notez qu'il utilise <code>db.execute</code> (de la biblioth√®que de CS50) pour interroger <code>finance.db</code>. Et remarquez comment il utilise <code>check_password_hash</code> pour comparer les hachages des mots de passe des utilisateurs. Notez √©galement que <code>login</code> ¬´ se souvient ¬ª qu'un utilisateur est connect√© en stockant son <code>user_id</code>, un entier, dans <code>session</code>. De cette fa√ßon, toutes les routes de ce fichier peuvent v√©rifier quel utilisateur, le cas √©ch√©ant, est connect√©. Enfin, notez qu'une fois que l'utilisateur s'est connect√© avec succ√®s, <code>login</code> redirigera vers ¬´ / ¬ª, amenant l'utilisateur √† sa page d'accueil. En revanche, remarquez que ¬´ logout ¬ª efface simplement la ¬´ session ¬ª, d√©connectant ainsi un utilisateur.</p>
<p>Notez que la plupart des itin√©raires sont ¬´ d√©cor√©s ¬ª avec <code>@login_required</code> (une fonction √©galement d√©finie dans <code>helpers.py</code>). Ce d√©corateur garantit que, si un utilisateur essaie de visiter l'un de ces itin√©raires, il sera d'abord redirig√© vers <code>login</code> pour se connecter.</p>
<p>Notez √©galement que la plupart des itin√©raires prennent en charge GET et POST. Malgr√© cela, la plupart d'entre eux (pour l'instant¬†!) retournent simplement un ¬´¬†excuse¬†¬ª, car ils ne sont pas encore impl√©ment√©s.</p>
<h4><code>helpers.py</code></h4>
<p>Ensuite, jetez un ≈ìil √† <code>helpers.py</code>. Ah, voici l'impl√©mentation de <code>apology</code>. Notez qu'il finit par restituer un mod√®le, <code>apology.html</code>. Il arrive √©galement √† d√©finir en lui-m√™me une autre fonction, <code>escape</code>, qu'il utilise simplement pour remplacer les caract√®res sp√©ciaux dans les excuses. En d√©finissant <code>escape</code> √† l'int√©rieur de <code>apology</code>, nous avons limit√© celui-ci √† ce dernier¬†; aucune autre fonction ne pourra (ou n'aura besoin) de l'appeler.</p>
<p>Vient ensuite dans le fichier <code>login_required</code>. Ne vous inqui√©tez pas si celui-ci est un peu cryptique, mais si vous vous √™tes d√©j√† demand√© comment une fonction peut renvoyer une autre fonction, voici un exemple¬†!</p>
<p>Vient ensuite <code>lookup</code>, une fonction qui, √©tant donn√© un ¬´ symbole ¬ª (par exemple, NFLX), renvoie une cotation boursi√®re pour une soci√©t√© sous la forme d'un <code>dict</code> avec deux cl√©s¬†: <code>price</code>, dont la valeur est un <code>float</code>¬†; et <code>symbol</code>, dont la valeur est un <code>str</code>, une version canonique (en majuscules) du symbole d'une action, quelle que soit la mani√®re dont ce symbole a √©t√© capitalis√© lorsqu'il a √©t√© transmis √† <code>lookup</code>.</p>
<div class="alert alert-warning" data-alert="warning" role="alert"><p>Veuillez noter. Si vous avez commenc√© ce probl√®me en 2023, notez que <code class="language-plaintext highlighter-rouge">lookup</code> ne renvoie plus une cl√© de <code class="language-plaintext highlighter-rouge">name</code>, alors assurez-vous de la supprimer de toute requ√™te qui l'attend. Aucun nom ne doit √™tre affich√© sur aucune page.</p></div>

<p>Enfin, dans le fichier, se trouve <code>usd</code>, une courte fonction qui formate simplement un <code>float</code> en USD (par exemple, <code>1234.56</code> est format√© en <code>$1,234.56</code>).</p>
<h4><code>requirements.txt</code></h4>
<p>Jetez ensuite un coup d'≈ìil √† <code>requirements.txt</code>. Ce fichier prescrit simplement les packages dont cette application d√©pendra.</p>
<h4><code>static/</code></h4>
<p>Jetez √©galement un coup d'≈ìil √† <code>static/</code>, √† l'int√©rieur duquel se trouve <code>styles.css</code>. C'est l√† que vit un peu de CSS initial. Vous √™tes libre de le modifier comme bon vous semble.</p>
<h4><code>templates/</code></h4>
<p>Maintenant, regardez dans <code>templates/</code>. Dans <code>login.html</code>, il s'agit essentiellement d'un simple formulaire HTML, stylis√© avec <a href="https://getbootstrap.com/">Bootstrap</a>. Dans <code>apology.html</code>, en revanche, se trouve un mod√®le d'excuses. Rappelez-vous que <code>apology</code> dans <code>helpers.py</code> prenait deux arguments¬†: <code>message</code>, qui √©tait transmis √† <code>render_template</code> comme valeur de <code>bottom</code>, et, √©ventuellement, <code>code</code>, qui √©tait transmis √† <code>render_template</code> comme valeur de <code>top</code>. Remarquez dans <code>apology.html</code> comment ces valeurs sont finalement utilis√©es¬†! Et <a href="https://github.com/jacebrowning/memegen">voici pourquoi</a> 0:-)</p>
<p>Enfin, il y a <code>layout.html</code>. C'est un peu plus grand que d'habitude, mais c'est surtout parce qu'il est livr√© avec une ¬´¬†barre de navigation¬†¬ª (barre de navigation) sophistiqu√©e et adapt√©e aux mobiles, √©galement bas√©e sur Bootstrap. Remarquez comment il d√©finit un bloc, <code>main</code>, √† l'int√©rieur duquel iront les mod√®les (y compris <code>apology.html</code> et <code>login.html</code>). Il inclut √©galement la prise en charge du <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/#message-flashing">message clignotant</a> de Flask afin que vous puissiez relayer les messages d'une route √† une autre pour que l'utilisateur les voie.</p>
<h2>Sp√©cification</h2>
<h3><code>register</code></h3>
<p>Compl√©tez la mise en ≈ìuvre de <code>register</code> de telle sorte qu'elle permette √† un utilisateur de s'inscrire pour un compte via un formulaire.</p>
<ul>
<li>Exiger qu'un utilisateur saisisse un nom d'utilisateur, impl√©ment√© comme un champ de texte dont le <code>name</code> est <code>username</code>. Affichez des excuses si l'entr√©e de l'utilisateur est vide ou si le nom d'utilisateur existe d√©j√†.<ul>
<li>Notez que <a href="https://cs50.readthedocs.io/libraries/cs50/python/#cs50.SQL"><code>cs50.SQL.execute</code></a> l√®vera une exception <code>ValueError</code> si vous essayez d'<code>INSERT</code> un nom d'utilisateur en double parce que nous avons cr√©√© un <code>UNIQUE INDEX</code> sur <code>users.username</code>. Veillez donc √† utiliser <code>try</code> et <code>except</code> pour d√©terminer si le nom d'utilisateur existe d√©j√†.</li>
</ul>
</li>
<li>Exiger qu'un utilisateur saisisse un mot de passe, impl√©ment√© comme un champ de texte dont le <code>name</code> est <code>password</code>, puis le m√™me mot de passe √† nouveau, impl√©ment√© comme un champ de texte dont le <code>name</code> est <code>confirmation</code>. Affichez des excuses si l'une des entr√©es est vide ou si les mots de passe ne correspondent pas.</li>
<li>Soumettez l'entr√©e de l'utilisateur via <code>POST</code> √† <code>/register</code>.</li>
<li><code>INSERT</code> le nouvel utilisateur dans <code>users</code>, en stockant un hachage du mot de passe de l'utilisateur, et non le mot de passe lui-m√™me. Hachez le mot de passe de l'utilisateur avec <a href="https://werkzeug.palletsprojects.com/en/2.3.x/utils/#werkzeug.security.generate_password_hash"><code>generate_password_hash</code></a> Il y a de fortes chances que vous souhaitiez cr√©er un nouveau mod√®le (par exemple, <code>register.html</code>) assez similaire √† <code>login.html</code>.</li>
</ul>
<p>Une fois que vous avez correctement impl√©ment√© <code>register</code>, vous devriez pouvoir cr√©er un compte et vous connecter (puisque <code>login</code> et <code>logout</code> fonctionnent d√©j√†)¬†! Et vous devriez pouvoir voir vos lignes via phpLiteAdmin ou <code>sqlite3</code>.</p>
<h3><code>quote</code></h3>
<p>Compl√©tez la mise en ≈ìuvre de <code>quote</code> de telle sorte qu'elle permette √† un utilisateur de rechercher le prix actuel d'une action.</p>
<ul>
<li>Exiger qu'un utilisateur saisisse le symbole d'une action, impl√©ment√© comme un champ de texte dont</li>
</ul>
<h3><code>buy</code></h3>
<p>Compl√©tez l'impl√©mentation de <code>buy</code> de telle sorte qu'elle permette √† un utilisateur d'acheter des actions.</p>
<ul>
<li>Exigez qu'un utilisateur saisisse un symbole d'action, impl√©ment√© comme un champ texte dont le <code>name</code> est <code>symbol</code>. Affichez une excuse si l'entr√©e est vide ou si le symbole n'existe pas (selon la valeur renvoy√©e par <code>lookup</code>).</li>
<li>Exigez qu'un utilisateur saisisse un nombre d'actions, impl√©ment√© comme un champ texte dont le <code>name</code> est <code>shares</code>. Affichez une excuse si l'entr√©e n'est pas un entier positif.</li>
<li>Soumettez la saisie de l'utilisateur via <code>POST</code> √† <code>/buy</code>.</li>
<li>Une fois termin√©, redirigez l'utilisateur vers la page d'accueil.</li>
<li>Il y a de fortes chances que vous deviez appeler <code>lookup</code> pour rechercher le prix actuel d'une action.</li>
<li>Il y a de fortes chances que vous deviez <code>SELECT</code> le montant d'argent liquide dont dispose actuellement l'utilisateur dans <code>users</code>.</li>
<li>Ajoutez une ou plusieurs nouvelles tables √† <code>finance.db</code> pour assurer le suivi de l'achat. Stockez suffisamment d'informations pour savoir qui a achet√© quoi, √† quel prix et quand.<ul>
<li>Utilisez des types SQLite appropri√©s.</li>
<li>D√©finissez des index <code>UNIQUE</code> sur tous les champs qui doivent √™tre uniques.</li>
<li>D√©finissez des index (non <code>UNIQUE</code>) sur tous les champs par lesquels vous effectuerez une recherche (comme via <code>SELECT</code> avec <code>WHERE</code>).</li>
</ul>
</li>
<li>Affichez une excuse, sans terminer l'achat, si l'utilisateur n'a pas les moyens d'acqu√©rir le nombre d'actions au prix actuel.</li>
<li>Vous n'avez pas √† vous soucier des conditions de course (ou utiliser des transactions).</li>
</ul>
<p>Une fois que vous avez impl√©ment√© <code>buy</code> correctement, vous devriez pouvoir voir les achats des utilisateurs dans vos nouvelles tables via phpLiteAdmin ou <code>sqlite3</code>.</p>
<h3><code>index</code></h3>
<p>Compl√©tez l'impl√©mentation de <code>index</code> de telle sorte qu'elle affiche un tableau HTML r√©sumant, pour l'utilisateur actuellement connect√©, les actions que l'utilisateur poss√®de, le nombre d'actions poss√©d√©es, le prix actuel de chaque action et la valeur totale de chaque avoir (c'est-√†-dire les actions fois le prix). Affichez √©galement le solde de tr√©sorerie actuel de l'utilisateur ainsi qu'un total g√©n√©ral (c'est-√†-dire la valeur totale des actions plus la tr√©sorerie).</p>
<ul>
<li>Il y a de fortes chances que vous deviez ex√©cuter plusieurs <code>SELECT</code>s. Selon la fa√ßon dont vous impl√©mentez vos tables, vous pourriez trouver <a href="https://www.google.com/search?q=SQLite+GROUP+BY,">GROUP BY</a> <a href="https://www.google.com/search?q=SQLite+HAVING,">HAVING</a> <a href="https://www.google.com/search?q=SQLite+SUM,">SUM</a> et/ou <a href="https://www.google.com/search?q=SQLite+WHERE">WHERE</a> int√©ressant.</li>
<li>Il y a de fortes chances que vous deviez appeler <code>lookup</code> pour chaque action.</li>
</ul>
<h3><code>sell</code></h3>
<p>Compl√©tez l'impl√©mentation de <code>sell</code> de telle sorte qu'elle permette √† un utilisateur de vendre des actions d'une action (qu'il poss√®de).</p>
<ul>
<li>Exigez qu'un utilisateur saisisse le symbole d'une action, impl√©ment√© comme un menu <code>select</code> dont le <code>name</code> est <code>symbol</code>. Affichez une excuse si l'utilisateur ne parvient pas √† s√©lectionner une action ou si (d'une mani√®re ou d'une autre, une fois soumis) l'utilisateur ne poss√®de aucune action de cette action.</li>
<li>Exigez qu'un utilisateur saisisse un nombre d'actions, impl√©ment√© comme un champ texte dont le <code>name</code> est <code>shares</code>. Affichez une excuse si l'entr√©e n'est pas un entier positif ou si l'utilisateur ne poss√®de pas autant d'actions de l'action.</li>
<li>Soumettez la saisie de l'utilisateur via <code>POST</code> √† <code>/sell</code>.</li>
<li>Une fois termin√©, redirigez l'utilisateur vers la page d'accueil.</li>
<li>Vous n'avez pas √† vous soucier des conditions de course (ou utiliser des transactions).</li>
</ul>
<h3><code>history</code></h3>
<p>Compl√©tez l'impl√©mentation de <code>history</code> de telle sorte qu'elle affiche un tableau HTML r√©sumant toutes les transactions d'un utilisateur, en listant ligne par ligne chaque achat et chaque vente.</p>
<ul>
<li>Pour chaque ligne, indiquez clairement si une action a √©t√© achet√©e ou vendue et incluez le symbole de l'action, le prix (d'achat ou de vente), le nombre d'actions achet√©es ou vendues, ainsi que la date et l'heure auxquelles la transaction a eu lieu.</li>
<li>Vous devrez peut-√™tre modifier la table que vous avez cr√©√©e pour <code>buy</code> ou la compl√©ter avec une table suppl√©mentaire. Essayez de minimiser les redondances.</li>
</ul>
<h3>Touche personnelle</h3>
<p>Impl√©mentez au moins une touche personnelle de votre choix :</p>
<ul>
<li>Permettre aux utilisateurs de modifier leurs mots de passe.</li>
<li>Permettre aux utilisateurs d'ajouter de l'argent liquide suppl√©mentaire √† leur compte.</li>
<li>Permettre aux utilisateurs d'acheter plus d'actions ou de vendre des actions qu'ils poss√®dent d√©j√† via l'index lui-m√™me, sans avoir √† taper manuellement les symboles des actions.</li>
<li>Impl√©mentez une autre fonctionnalit√© de port√©e comparable.</li>
</ul>
<h2>Proc√©dure pas √† pas</h2>
<div class="alert alert-info" data-alert="info" role="alert"><p>Notez que Brian mentionne que <code class="language-plaintext highlighter-rouge">lookup</code> renverra le nom de l'action. Selon ce qui pr√©c√®de, il ne renvoie plus que le prix et le symbole.</p></div>

<div class="ratio ratio-16x9" data-video=""><iframe allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="border" data-video="" src="https://www.youtube.com/embed/7wPTAwT-6bA?modestbranding=0&amp;rel=0&amp;showinfo=0"></iframe></div>

<h2>Essais</h2>
<p>Assurez-vous de tester manuellement votre application Web, comme suit :</p>
<ul>
<li>enregistrer un nouvel utilisateur et v√©rifier que sa page de portefeuille se charge avec les informations correctes,</li>
<li>demander un devis en utilisant un symbole d'action valide,</li>
<li>acheter une action plusieurs fois, en v√©rifiant que le portefeuille affiche les totaux corrects,</li>
<li>vendre tout ou partie d'une action, en v√©rifiant √† nouveau le portefeuille, et</li>
<li>v√©rifier que votre page d'historique affiche toutes les transactions de votre utilisateur connect√©.</li>
</ul>
<p>Testez √©galement des utilisations inattendues, comme suit :</p>
<ul>
<li>saisir des cha√Ænes alphab√©tiques dans des formulaires lorsque seuls des chiffres sont attendus,</li>
<li>saisir des nombres z√©ro ou n√©gatifs dans des formulaires lorsque seuls des nombres positifs sont attendus,</li>
<li>saisir des valeurs √† virgule flottante dans des formulaires lorsque seuls des entiers sont attendus,</li>
<li>essayer de d√©penser plus d'argent liquide qu'un utilisateur n'en a,</li>
<li>essayer de vendre plus d'actions qu'un utilisateur n'en poss√®de,</li>
<li>saisir un symbole d'action invalide, et</li>
<li>inclure des caract√®res potentiellement dangereux comme <code>'</code> et <code>;</code> dans les requ√™tes SQL.</li>
</ul>
<p>Vous pouvez √©galement v√©rifier la validit√© de votre HTML en cliquant sur le bouton <strong>I ‚ô• VALIDATOR</strong> dans le pied de page de chacune de vos pages, qui publiera votre HTML sur <a href="https://validator.w3.org/">validator.w3.org</a>.</p>
<p>Une fois satisfait, pour tester votre code avec <code>check50</code>, ex√©cutez ce qui suit.</p>
<pre><code>  check50 cs50/problems/2024/x/finance
</code></pre>
<div class="alert alert-warning" data-alert="warning" role="alert"><p>Sachez que <code class="language-plaintext highlighter-rouge">check50</code> testera l'ensemble de votre programme dans son ensemble. Si vous l'ex√©cutez <strong>avant</strong> d'avoir termin√© toutes les fonctions requises, il peut signaler des erreurs sur des fonctions qui sont en r√©alit√© correctes mais qui d√©pendent d'autres fonctions.</p></div>

<h2>Style</h2>
<pre><code>  style50 app.py
</code></pre>
<h2>Solution du staff</h2>
<p>Vous √™tes libre de styliser votre propre application diff√©remment, mais voici √† quoi ressemble la solution du staff¬†!</p>
<p><a href="https://finance.cs50.net/">https://finance.cs50.net/</a></p>
<p>N‚Äôh√©sitez pas √† cr√©er un compte et √† vous amuser. N‚Äôutilisez <strong>pas</strong> un mot de passe que vous utilisez sur d‚Äôautres sites.</p>
<p>Il est <strong>raisonnable</strong> de consulter le HTML et le CSS du staff.</p>
<h2>Astuces</h2>
<ul>
<li>Pour formater une valeur comme une valeur de dollar am√©ricain (avec des cents indiqu√©s √† deux d√©cimales), vous pouvez utiliser le filtre <code>usd</code> dans vos mod√®les Jinja (en imprimant les valeurs comme <code>{{ value | usd }}</code> au lieu de <code>{{ value }}</code>.</li>
<li>Dans <code>cs50.SQL</code>, il existe une m√©thode <code>execute</code> dont le premier argument doit √™tre une <code>str</code> de SQL. Si cette <code>str</code> contient des param√®tres de points d‚Äôinterrogation auxquels des valeurs doivent √™tre li√©es, ces valeurs peuvent √™tre fournies comme des param√®tres nomm√©s suppl√©mentaires √† <code>execute</code>. Voir l‚Äôimpl√©mentation de <code>login</code> pour un exemple de ce type. La valeur de retour de <code>execute</code> est la suivante¬†:<ul>
<li>Si <code>str</code> est un <code>SELECT</code>, alors <code>execute</code> renvoie une <code>list</code> d‚Äôau moins z√©ro objet <code>dict</code>, √† l‚Äôint√©rieur desquels se trouvent des cl√©s et des valeurs repr√©sentant respectivement les champs et les cellules d‚Äôune table.</li>
<li>Si <code>str</code> est un <code>INSERT</code> et que la table dans laquelle les donn√©es ont √©t√© ins√©r√©es contient une <code>PRIMARY KEY</code> auto-incr√©mentante, alors <code>execute</code> renvoie la valeur de la cl√© primaire de la ligne nouvellement ins√©r√©e.</li>
<li>Si <code>str</code> est un <code>DELETE</code> ou un <code>UPDATE</code>, alors <code>execute</code> renvoie le nombre de lignes supprim√©es ou mises √† jour par <code>str</code>.</li>
</ul>
</li>
<li>Rappelez-vous que <code>cs50.SQL</code> enregistrera dans votre fen√™tre de terminal toutes les requ√™tes que vous ex√©cutez via <code>execute</code> (afin que vous puissiez v√©rifier qu‚Äôelles sont comme pr√©vu).</li>
<li>Veillez √† utiliser des param√®tres li√©s √† un point d‚Äôinterrogation (c‚Äôest-√†-dire, un <a href="https://www.python.org/dev/peps/pep-0249/#paramstyle">style de param√®tre</a> de <code>named</code>) lorsque vous appelez la m√©thode <code>execute</code> de CS50, √† la fa√ßon de <code>WHERE ?</code>. N‚Äôutilisez <strong>pas</strong> de f-strings, <a href="https://docs.python.org/3.6/library/functions.html#format,"><code>format</code></a> ou <code>+</code> (c‚Äôest-√†-dire, la concat√©nation), de peur de risquer une attaque par injection SQL.</li>
<li>Si (et seulement si) vous √™tes d√©j√† √† l‚Äôaise avec SQL, vous pouvez utiliser <a href="https://docs.sqlalchemy.org/en/latest/index.html">SQLAlchemy Core</a> ou <a href="https://flask-sqlalchemy.pocoo.org/">Flask-SQLAlchemy</a> (c‚Äôest-√†-dire, <a href="https://docs.sqlalchemy.org/en/latest/index.html">SQLAlchemy ORM</a>) au lieu de <code>cs50.SQL</code>.</li>
<li>Vous pouvez ajouter des fichiers statiques suppl√©mentaires √† <code>static/</code>.</li>
<li>Il y a de fortes chances que vous souhaitiez consulter la <a href="https://jinja.palletsprojects.com/en/3.1.x/">documentation de Jinja</a> lors de l‚Äôimpl√©mentation de vos mod√®les.</li>
<li>Il est <strong>raisonnable</strong> de demander √† d‚Äôautres personnes d‚Äôessayer (et d‚Äôessayer de d√©clencher des erreurs) sur votre site.</li>
<li>Vous √™tes libre de modifier l‚Äôesth√©tique des sites, comme via<ul>
<li><a href="https://bootswatch.com/">bootswatch.com</a>,</li>
<li><a href="https://getbootstrap.com/docs/5.1/content/">getbootstrap.com/docs/5.1/content</a>,</li>
<li><a href="https://getbootstrap.com/docs/5.1/components/">getbootstrap.com/docs/5.1/components</a>, et/ou</li>
<li><a href="https://memegen.link/">memegen.link</a>.</li>
</ul>
</li>
<li>Vous pouvez trouver la <a href="https://flask.palletsprojects.com/en/1.1.x/quickstart/">documentation de Flask</a> et la <a href="https://jinja.palletsprojects.com/en/2.11.x/templates/">documentation de Jinja</a> utiles¬†!</li>
</ul>
<h2>FAQ</h2>
<h3>ImportError¬†: No module named ‚Äòapplication‚Äô</h3>
<p>Par d√©faut, <code>flask</code> recherche un fichier nomm√© <code>app.py</code> dans votre r√©pertoire de travail actuel (car nous avons configur√© la valeur de <code>FLASK_APP</code>, une variable d‚Äôenvironnement, √† <code>app.py</code>). Si vous voyez cette erreur, il y a de fortes chances que vous ayez ex√©cut√© <code>flask</code> dans le mauvais r√©pertoire¬†!</p>
<h3>OSError¬†: [Errno 98] Address already in use</h3>
<p>Si, lors de l‚Äôex√©cution de <code>flask</code>, vous voyez cette erreur, il y a de fortes chances que (vous) ayez (encore) <code>flask</code> en cours d‚Äôex√©cution dans un autre onglet. Assurez-vous de terminer cet autre processus, comme avec Ctrl-C, avant de red√©marrer <code>flask</code>. Si vous n‚Äôavez pas d‚Äôautre onglet de ce type, ex√©cutez <code>fuser -k 8080/tcp</code> pour terminer tous les processus qui √©coutent (encore) sur le port TCP 8080.</p>
<h2>Comment soumettre</h2>
<p>Dans votre terminal, ex√©cutez ce qui suit pour soumettre votre travail.</p>
<pre><code>  submit50 cs50/problems/2024/x/finance
</code></pre>
<div class="alert alert-danger" data-alert="danger" role="alert"><h3 id="why-does-my-submission-pass-check50-but-shows-no-results-in-my-gradebook-after-running-submit50">Pourquoi ma soumission r√©ussit-elle √† check50, mais affiche-t-elle ¬´¬†Aucun r√©sultat¬†¬ª dans mon Gradebook apr√®s l‚Äôex√©cution de submit50¬†?</h3>

<p>Dans certains cas, <code class="language-plaintext highlighter-rouge">submit50</code> peut ne pas noter le devoir en raison de¬†: (1)¬†un formatage incoh√©rent dans votre fichier <code class="language-plaintext highlighter-rouge">app.py</code>, et/ou (2)¬†d‚Äôautres fichiers inutiles soumis avec le probl√®me d√©fini. Pour r√©soudre ces probl√®mes, ex√©cutez <code class="language-plaintext highlighter-rouge">black app.py</code> dans le dossier <code class="language-plaintext highlighter-rouge">finance</code>. R√©solvez les probl√®mes qui sont r√©v√©l√©s. Ensuite, examinez le contenu de votre dossier <code class="language-plaintext highlighter-rouge">finance</code>. Supprimez les fichiers superflus, tels que les sessions Flask ou d‚Äôautres fichiers qui ne font pas partie de votre impl√©mentation du probl√®me d√©fini. De plus, ex√©cutez √† nouveau <code class="language-plaintext highlighter-rouge">check50</code> pour vous assurer que votre soumission fonctionne toujours. Enfin, ex√©cutez √† nouveau la commande <code class="language-plaintext highlighter-rouge">submit50</code> ci-dessus. Votre r√©sultat appara√Ætra dans votre <a href="https://cs50.me/cs50x">Gradebook</a> dans quelques minutes.</p>

<p>Veuillez noter que s‚Äôil y a un score num√©rique √† c√¥t√© de votre soumission de finance dans la zone <code class="language-plaintext highlighter-rouge">submissions</code> de votre <a href="https://cs50.me/cs50x">Gradebook</a>, la proc√©dure d√©crite ci-dessus ne s‚Äôapplique pas √† vous. Il est probable que vous n‚Äôayez pas enti√®rement rempli les exigences du probl√®me d√©fini et que vous devriez vous fier √† <code class="language-plaintext highlighter-rouge">check50</code> pour obtenir des indices sur ce qu‚Äôil reste √† faire.</p></div>


        </main>
      </div>
    </div>
  </body>

</html>